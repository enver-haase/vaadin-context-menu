<!DOCTYPE html>

<head lang="en">
  <meta charset="UTF-8">

  <script src="../../../webcomponentsjs/webcomponents-lite.js"></script>
  <script>
    const theme = window.location.search.replace(/.*theme=(\w+).*/, '$1') || 'lumo';
    document.write(`<link rel="import" href="../../theme/${theme}/vaadin-context-menu.html">`);
    document.write(`<link rel="import" href="../../../vaadin-list-box/theme/${theme}/vaadin-list-box.html">`);
    document.write(`<link rel="import" href="../../../vaadin-item/theme/${theme}/vaadin-item.html">`);
  </script>
  <style>
    /* cover all the viewport */
    #keys-tests {
      padding: 10px;
      position: absolute;
      top: 0;
      bottom: 0;
      left: 0;
      right: 0;
    }
  </style>
</head>

<body>

  <div id="keys-tests">
    <vaadin-context-menu id="keys">
      <template>
        <vaadin-list-box>
          <vaadin-item>First menu item</vaadin-item>
          <vaadin-item>Second menu item</vaadin-item>
          <vaadin-item disabled>Third menu item</vaadin-item>
        </vaadin-list-box>
      </template>
      <p>Keys</p>
    </vaadin-context-menu>
  </div>

  <script>
    function fire(node, eventType, detail, eventProps) {
      const evt = new CustomEvent(eventType, {bubbles: true, composed: true, cancelable: true, detail: detail});
      Object.assign(evt, eventProps);
      node.dispatchEvent(evt);
      return evt;
    }

    // eslint-disable-next-line no-unused-vars
    function arrowUp(target) {
      target.openOn = 'keydown';
      fire(target.listenOn, 'keydown', {}, {keyCode: 38, key: 'ArrowUp'});
    }

    // eslint-disable-next-line no-unused-vars
    function arrowDown(target) {
      target.openOn = 'keydown';
      fire(target.listenOn, 'keydown', {}, {keyCode: 40, key: 'ArrowDown'});
    }

    // eslint-disable-next-line no-unused-vars
    function esc(target) {
      fire(target, 'keydown', {}, {keyCode: 27, key: 'Esc'});
    }
  </script>

</body>
